<div class="diagram image">
    <svg></svg>
</div>

<script type='text/javascript' src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
<script type='text/javascript' src='js/generate_elements.js'></script>
<script type='text/javascript' src='js/initialize_page.js'></script>
<script type='text/javascript' src='js/static_variables.js'></script>

<script>

// Dynamic styles and attributes

function log(content){
	console.log(content);
}

var svgWidth = 300;
var svgHeight = 205;

var fontSize = '13px';

var rectWidth = 50;
var rectHeight = 30;
var rectRadius = 15;
var rectXoffset;
var rectYoffset;

var circleRadius = 7;

// Draw diagram

var circleWidthOffset  = svgWidth / 17;
var circleHeightOffset = svgHeight / 6;


var coordinates = []
var multipliers = [16, 8, 4, 2, 1];
var subtractions = [7.5, 3.5, 1.5, 0.5, 0];

function useCoordinatesTo(action){
	for (var k=0; k < 5; k++) {
		coordinates.push([]);
		for (var i=0; i < Math.pow(2, k); i++) {

			var x = circleWidthOffset * multipliers[k] * (i+1) - circleWidthOffset * subtractions[k];
			var y = circleHeightOffset * (k + 1);

			if ( action === 'store' ) {
				coordinates[coordinates.length-1].push([x, y]);	
			} else {
				generateCircle(x, y);
			}

		}
	}
}

function drawLines(){

	for (var i=1; i < coordinates.length+1; i++ ) {
		for ( k in coordinates[i] ) {
			generateLine(coordinates[i-1][Math.floor(k/2)][0], coordinates[i-1][Math.floor(k/2)][1], coordinates[i][k][0], coordinates[i][k][1]);
		}
	}
}

useCoordinatesTo('store');
drawLines();
useCoordinatesTo('draw');

/*

Cheatsheet:

generateRect   ( x, y, [ width, height, borderRadius, fill, stroke, strokeWidth ])
generateCircle ( cx, cy, [ r, fill, stroke, strokeWidth ])
generateText   ( content, x, y, [ newFontSize, fill, textAnchor ])
generateLine   (x1, y1, x2, y2, [ stroke, strokeWidth ])

*/

</script>